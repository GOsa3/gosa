TODO: make a real file out of this

Scratchbook

 - docker run -d -p 389:389 -p 5432:5432 cpollmeier/gosa3:devel
 - install python3-gunicorn, python3-gevent, python3-setproctitle, python3-pyldap packages
 - Ubuntu: virtualenv --python=python3 --system-site-packages .env
   Fedora: virtualenv-3.5 --system-site-packages .env
 - source .env/bin/activate
 - ./setup.py develop
 - gosa --config example


Testing:
 # run all tests
 - ./setup.py test --addopts="--runslow"
 # run only fast tests
 - ./setup.py test
 # stop testing after first failed test (does not work in the root dir currently, only in the modules subdirs)
 - ./setup.py test --addopts="-x --runslow"
 # verbose output
 - ./setup.py test --addopts="-v --runslow" or - ./setup.py test --addopts="-vv --runslow"

DBus access:
 - create /etc/dbus-1/system.d/org.gosa.conf with content below and reload dbus (service dbus reload):
 <!DOCTYPE busconfig PUBLIC
  "-//freedesktop//DTD D-BUS Bus Configuration 1.0//EN"
  "http://www.freedesktop.org/standards/dbus/1.0/busconfig.dtd">
 <busconfig>

   <!-- Only user root can own the clacks dbus instance -->
   <policy user="root">
     <allow own="org.gosa"/>
   </policy>

   <policy group="gonicus">
     <allow own="org.gosa"/>
     <allow receive_sender="org.gosa"/>
     <allow send_destination="org.gosa"
            send_interface="org.freedesktop.DBus.Introspectable"/>
     <allow send_destination="org.gosa"
            send_interface="org.gosa"/>
     <allow send_destination="org.freedesktop.login1"/>
     <allow send_destination="org.freedesktop.Hal"
            send_interface="org.freedesktop.Hal.Device.SystemPowerManagement"/>
   </policy>

 </busconfig>


Mosquitto server:
 - install server + auth plugin: apt-get install mosquitto mosquitto-auth-plugin
 - SKIP this step (currently authentification is blocking client RPC calls):
    configure auth plugin:
    - create /etc/mosquitto/conf.d/auth.conf with following content
      """
      allow_anonymous false

      auth_plugin /usr/lib/mosquitto-auth-plugin/auth-plugin.so
      auth_opt_backends http
      auth_opt_http_ip 127.0.0.1
      auth_opt_http_port 8000
      #auth_opt_http_with_tls true
      auth_opt_http_getuser_uri /mqtt/auth/
      auth_opt_http_superuser_uri /mqtt/superuser
      auth_opt_http_aclcheck_uri /mqtt/acl
      """
    - note for non testing systems the tls setting must be uncommented


